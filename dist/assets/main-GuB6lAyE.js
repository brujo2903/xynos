import"./modulepreload-polyfill-B5Qt9EMX.js";const d=["O wandering soul, thou art lost in the Labyrinth of Digital Shadows!","By the grace of Athena, click upon the stones to guide thy path.","Beware the creatures of Tartarus that lurk in shadows.","The Gates of Hermes shall guide thee between realms.","Each chamber holds mysteries deep as the Oracle's wisdom...","The Sacred Temple of Hephaestus holds the key to thy salvation!"],p=["By the will of Zeus, thou hast conquered the digital labyrinth!","May the gods smile upon thy journey ahead..."],g="Alas! The beast of the depths has claimed another soul!",m=[["W","W","W","M","W","W"," "," "," ","M"],[" "," "," "," ","W","W","M"," ","B","B"],["W"," ","B","B","W","W"," "," "," ","K"],["W"," "," "," ","W","W","W"," ","M","W"],[" ","T","T"," ","M"," ","L_7-9"," ","T","W"],[" ","T","T"," ","W"," ","B","B","W","W"],["K"," ","S"," ","L_0-6"," ","P_4","L_1-9","P_1","W"],[" ","B","T","B","M"," ","B","W","W","W"],[" ","T","W","L_9-2"," "," ","B","W","T","W"],["W","K"," "," ","M"," "," ","K","T","W"]],b=m,u="show_post_dialog";function k(o,s){let a="";for(let t=0;t<o.length;t++)for(let e=0;e<o[t].length;e++){const c=o[t][e],l=`${e}_${t}`,i=c.split("_");switch(a+=`<input class="map-check" type="radio" name="map-radio" id="grid_${l}"${c==="S"?" checked":""}>`,i[0]){case"K":a+=`<input class="map-check" type="checkbox" id="key_${l}">`;break;case"L":a+=`<input class="map-check" type="checkbox" id="lock_${l}">`;break;case"M":a+=`<input class="map-check monster-check" type="checkbox" id="monster_${l}">`;break}}return a}function _(o,s,a){let t="";for(let e=0;e<=o.length;e++)t+=`<input class="map-check dialog-check" type="radio" name="pre_dialog" id="pre_dialog_${e}"${e===0?" checked":""}>`;return s.forEach((e,c)=>{t+=`<input class="map-check dialog-check" type="radio" name="post_dialog" id="post_dialog_${c}"${c===0?" checked":""}>`}),t+=`<input class="map-check dialog-check" type="checkbox" id="${a}">`,t}function f(o,s){let a="";for(let t=0;t<o.length;t++)for(let e=0;e<o[t].length;e++){const c=o[t][e],l=`${e}_${t}`,i=c.split("_");let r="grid",n=`grid_${l}`;switch(i[0]){case"W":r+=" wall";break;case"T":r+=" tree";break;case"F":r+=" finish",n=s;break;case"B":r+=" barrel";break}switch(a+=`<label class="${r}" for="${n}">`,i[0]){case"K":a+=`<label class="object key" for="key_${l}"></label>`;break;case"L":const h=i[1].split("-").join("_");a+=`<label class="object lock" for="lock_${l}"></label>`,a+=`<label class="object lock" data-key="${h}"></label>`;break;case"M":a+=`<label class="object monster" for="monster_${l}"></label>`;break}a+="</label>"}return a}function y(o,s,a){let t="";for(let e=o.length-1;e>=0;e--)t+=`<label class="pre-dialog" id="pre_dialog_trigger_${e}" for="pre_dialog_${e+1}">${o[e]}</label>`;for(let e=s.length-1;e>=0;e--)t+=`<label class="post-dialog" id="post_dialog_trigger_${e}" for="post_dialog_${e+1}">${s[e]}`,e===s.length-1&&(t+='<button type="reset" class="reset">Play again</button>'),t+="</label>";return t+='<div class="lose-dialog">',t+=`<span>${a}</span>`,t+='<button type="reset" class="reset">Play again</button>',t+="</div>",t}async function W(o){const{map:s,preDialog:a,postDialog:t,loseDialog:e,FINISH_ID:c}=o;let l="";return l+=k(s),l+=_(a,t,c),l+='<div class="view">',l+='<div class="map">',l+=f(s,c),l+="</div>",l+='<div class="character"></div>',l+='<div class="fog"></div>',l+=y(a,t,e),l+="</div>",l}async function $(o,s){try{const a=await W(s);o.innerHTML=a}catch(a){console.error("Failed to render game template:",a),o.innerHTML="<p>Failed to load game. Please try refreshing the page.</p>"}}async function T(){const o={map:b,preDialog:d,postDialog:p,loseDialog:g,FINISH_ID:u},s=document.querySelector(".game-form");s&&await $(s,o)}document.addEventListener("DOMContentLoaded",T);
